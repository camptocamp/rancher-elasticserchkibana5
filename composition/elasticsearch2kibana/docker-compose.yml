elasticsearch-conf:
  image: camptocamp/elasticsearch-conf:0.5
  labels: 
    io.rancher.container.hostname_override: container_name
    io.rancher.container.start_once: 'true'
  environment:
    cluster_name: bqtestclustername
  volumes_from:
    - elasticsearch
elasticsearch:
  image: elasticsearch:2.3
  labels:
    io.rancher.container.hostname_override: container_name
    io.rancher.sidekicks: elasticsearch-conf
  ports:
    - 9200:9200
  volumes:
    - /usr/share/elasticsearch/config
    - /opt/rancher/bin

# Kibana (no need for a conf as it can be configured through environment variables)
kibana:
  image: kibana:4.5
  ports:
    - 5601:5601
  links:
    - elasticsearch
  environment:
    ELASTICSEARCH_URL: http://elasticsearch:9200

